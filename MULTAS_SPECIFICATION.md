# MULTAs (Medical University Learning and Training Assessment system) 仕様書

## 1. アプリケーション概要

### 目的
医学部実習生が日々の体験を記録し、AI分析による12時計分類で学習進捗を可視化するシステム

### コアバリュー
- **記録の簡便性**: 実習中でも素早く体験を記録
- **即時フィードバック**: AI分析による即座の分類
- **成長の可視化**: レーダーチャートによる進捗表示
- **学習支援**: AIレポート生成による振り返り支援

## 2. 機能仕様

### 2.1 ユーザー認証
- シンプルなID/パスワードログイン
- 開発者モード（admin/dev/developerで有効化）
- LocalStorageでセッション管理

### 2.2 LOG機能（最重要）
**目的**: 生の体験データを確実に記録する

- テキスト入力フォーム（画面下部固定）
- 投稿ボタン（送信アイコン）
- 投稿履歴の時系列表示
- レベル/経験値システム
- 入力中の状態表示（ローディング）

**必須要件**:
- 他のタブの要素が絶対に表示されない
- 入力フォームが常に使用可能
- 投稿データの永続化（LocalStorage）

### 2.3 LIST機能
**目的**: AI分類された体験を整理して表示

- 12時計分類別のグループ表示
- AI分類理由の表示
- 長文の要素分解表示
- カテゴリ別色分け

### 2.4 REPORT機能
**目的**: 学習進捗の可視化とレポート生成

- 12時計分類レーダーチャート
- デイリーレポート生成（10投稿以上で利用可能）
- 総合レポート生成
- カテゴリ別説明（レジェンド）

### 2.5 日付管理
- 1日目〜5日目 + 練習用
- 日付別のデータ管理
- ドロップダウンで切り替え

## 3. 技術仕様

### 3.1 12時計カテゴリ
```
0: 分類不能
1: 医療倫理
2: 地域医療
3: 医学知識
4: 診察・手技
5: 患者に対する問題解決能力
6: 統合的臨床
7: 多職種連携
8: コミュニケーション
9: 安全管理
10: 職業観
11: 教養・人間性
12: 探究心
```

### 3.2 データ構造
```javascript
{
  records: [{
    id: number,
    originalText: string,
    timestamp: Date,
    day: number|'practice',
    category: 0-12,
    confidence: number,
    aiProcessed: boolean,
    aiReason: string,
    depth: number,
    vector: {x: number, y: number},
    consistency: boolean,
    multipleElements: array // 長文の場合
  }],
  userLevel: number,
  userExp: number,
  totalPosts: number,
  categoryPointsByDay: object,
  generatedReports: object
}
```

### 3.3 API連携
- OpenAI API（GPT-4）
- プロンプトによる12時計分類
- 長文の要素分解
- レポート生成

### 3.4 UI/UX要件
- モバイルファースト（iPhone対応重視）
- タブ切り替えによる画面遷移
- レスポンシブデザイン
- Safari対応（safe-area-inset）

## 4. 非機能要件

### 4.1 パフォーマンス
- 初回ロード3秒以内
- タブ切り替え即時反応
- AI分類5秒以内

### 4.2 セキュリティ
- APIキーのクライアント側保管（制限事項）
- 個人情報の自動検出と警告

### 4.3 可用性
- オフラインでの基本機能動作
- データのLocalStorage永続化
- エラー時のフォールバック

## 5. 制約事項

### 5.1 GitHub Pages制約
- 静的ホスティングのみ
- サーバーサイド処理不可
- 単一HTMLファイル推奨

### 5.2 ブラウザ対応
- Safari（iOS）最優先
- Chrome/Edge対応
- Firefox対応

## 6. 今後の拡張予定

### 6.1 Vercel版
- サーバーサイドAPI管理
- データベース連携
- 複数ユーザー対応

### 6.2 教員機能
- 学生の進捗確認
- フィードバック機能
- 統計ダッシュボード

### 6.3 共有機能
- みんなの学び（匿名共有）
- いいね機能
- コメント機能